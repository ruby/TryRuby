---
lang:   FA-IR
title:  خویشاوندان نجیب
answer: ^The Two Noble Kinsmen$
ok:     خیلی بهتر شد
error:  
load:   prev
---

خب، الان یه فهرست از نمایشنامه‌ها از اینترنت داریم. این فهرست در فرمت json بود.
خوشبختانه روبی یه متد داره که json رو به هَش روبی تبدیل می‌کنه. متد _get\_shakey_ این کار رو برامون انجام داده.

اما چون ساختار داده‌های json تو هَش حفظ شده، هنوز کمی خوندنش سخت به نظر میاد.
بیاید یه متد بسازیم که نمایشنامه‌ها رو به شکل مرتب و قابل خوندن نشون بده.

اگه فهرست نمایشنامه‌ها رو دقیق نگاه کنی، می‌بینی که یه جور ساختار <ruby>تو در تو<rt>nested</rt></ruby> داره.
(این خیلی رایجه برای داده‌هایی که از اینترنت می‌گیری.)
مثال ساختارش شبیه اینه:

<ul>
  <li>"William Shakespeare"
  <ul>
      <li>"1"
      <ul>
        <li>"title": "The Two Gentlemen of Verona"</li>
        <li>"finished": 1591</li>
      </ul>
      </li>
      <li>"2"
      <ul>
        <li>"title": "The Taming of the Shrew"</li>
        <li>"finished": 1591</li>
      </ul>
      </li>
      <li>...</li>
  </ul>
  </li>
</ul>

برای فهرست کردن نمایشنامه‌ها، اول باید به عنصر بالایی "William Shakespeare" در هَش دسترسی پیدا کنیم.
بعد باید روی هر عنصر پایینی __<ruby>iterate<rt>تکرار</rt></ruby>__ کنیم.

روبی یه متد داره به اسم __each__ که برای تکرار استفاده می‌شه. قبلا وقتی سیستم امتیازدهی کتاب‌ها رو ساختیم باهاش آشنا شدیم.

هر چیزی که متد __each__ برگردونه، به یک بلوک پاس داده می‌شه:

    s = get_shakey
    
    s["William Shakespeare"].each { |key, val|
      puts val["title"]
    }
