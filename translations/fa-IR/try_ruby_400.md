---
lang:   FA-IR
title:  همه با هم
answer: ^4$
ok:     بله، شکسپیر در سال ۱۵۹۱ چهار نمایشنامه نوشت
error:  اسخ برای سال ۱۵۹۱ باید ۴ باشد
load:   prev
---

حالا فرض کنیم فقط می‌خوایم اسم‌ها و تعداد نمایشنامه‌هایی که شکسپیر در یه سال مشخص نوشته رو بدونیم.

روبی به ما اجازه می‌ده که مقادیر دلخواه رو از یک هَش انتخاب کنیم. متد __select__ با کمک یک بلوک مشخص می‌کنه که چه چیزهایی انتخاب بشه و اون‌ها رو برمی‌گردونه.

بعد می‌تونیم از نتایجی که __select__ برگردونده، مثل قبل با متد __each__ استفاده کنیم، فقط کافیه بعد از بلوک select اضافه‌شون کنیم. این یه نمونه دیگه از <ruby>زنجیره‌سازی متدها<rt>method chaining</rt></ruby>ست که قبلا وقتی شعر رو برعکس کردیم دیدیم.

من یه متد آماده به اسم __count\_plays__ برات درست کردم. ببین می‌تونی بفهمی شکسپیر در سال __1591__ چند تا نمایشنامه نوشته. امتحان کن:

    def count_plays(year)
      s = get_shakey
      
      s["William Shakespeare"]
        .select { |k, v|
          v["finished"] == year
        }.each { |key, val|
          puts val["title"]
        }.count
    end
    
    puts count_plays(0)

توجه کردی که آخر each، متد count رو <ruby>زنجیره کردم<rt>chained</rt></ruby>؟ این کار باعث می‌شه متد __count\_plays__ یه مقدار بازگشتی داشته باشه.

اون خط __s = get_shakey__ رو ببین، می‌تونی __["William Shakespeare"].select { |k, v|__ را به آخر get_shakey اضافه کنی (در این حالت نیازی به نقطه نیست).
